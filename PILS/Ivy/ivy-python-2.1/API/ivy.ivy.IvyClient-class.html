<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>ivy.ivy.IvyClient</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="ivy-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.tls.cena.fr/products/ivy/">ivy-python: a python library for the Ivy software bus</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="ivy-module.html">Package&nbsp;ivy</a> ::
        <a href="ivy.ivy-module.html">Module&nbsp;ivy</a> ::
        Class&nbsp;IvyClient
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="ivy.ivy.IvyClient-class.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<!-- ==================== CLASS DESCRIPTION ==================== -->
<h1 class="epydoc">Class IvyClient</h1><p class="nomargin-top"><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient">source&nbsp;code</a></span></p>
<p>Represents a client connected to the bus. Every callback methods
registered by an agent receive an object of this type as their first
parameter, so that they know which agent on the bus is the cause of the
event which triggered the callback.</p>
<p>An IvyClient is responsible for:</p>
<blockquote>
<ul class="rst-simple">
<li>managing the remote agent's subscriptions,</li>
<li>sending messages to the remote agent.</li>
</ul>
</blockquote>
<p>It is <strong>not</strong> responsible for receiving messages from the client: another
object is in charge of that, namely an <a href="ivy.ivy.IvyHandler-class.html" class="link">IvyHandler</a> object.</p>
<p>The local IvyServer creates one IvyClient per agent on the bus.</p>
<div class="rst-section">
<h1 class="heading"><a id="rst-mt-safety" name="rst-mt-safety">MT-safety</a></h1>
<p>See the discussion in <a href="ivy.ivy.IvyClient-class.html#regexps" class="link">regexps</a>.</p>
</div>

<!-- ==================== INSTANCE METHODS ==================== -->
<a name="section-InstanceMethods"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Methods</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceMethods"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__init__"></a><span class="summary-sig-name">__init__</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">ip</span>,
        <span class="summary-sig-arg">port</span>,
        <span class="summary-sig-arg">client_socket</span>,
        <span class="summary-sig-arg">agent_id</span>=<span class="summary-sig-default">None</span>,
        <span class="summary-sig-arg">agent_name</span>=<span class="summary-sig-default">None</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.__init__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="get_regexps"></a><span class="summary-sig-name">get_regexps</span>(<span class="summary-sig-arg">self</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.get_regexps">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="send_error"></a><span class="summary-sig-name">send_error</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">num_id</span>,
        <span class="summary-sig-arg">msg</span>)</span><br />
      Sends an error message</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.send_error">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#__eq__" class="summary-sig-name">__eq__</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">client</span>)</span><br />
      cf.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.__eq__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__hash__"></a><span class="summary-sig-name">__hash__</span>(<span class="summary-sig-arg">self</span>)</span><br />
      <tt class="rst-docutils literal"><span class="pre">hash((self.ip,</span> <span class="pre">self.port))</span></tt></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.__hash__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__repr__"></a><span class="summary-sig-name">__repr__</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Returns <tt class="rst-docutils literal"><span class="pre">'ip:port</span> <span class="pre">(agent_name)'</span></tt></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.__repr__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="__str__"></a><span class="summary-sig-name">__str__</span>(<span class="summary-sig-arg">self</span>)</span><br />
      Returns <tt class="rst-docutils literal"><span class="pre">'agent_name&#64;FQDN'</span></tt></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.__str__">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr class="private">
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#_send" class="summary-sig-name" onclick="show_private();">_send</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">msg_type</span>,
        <span class="summary-sig-arg">*params</span>)</span><br />
      Internally used to send message to the remote agent through the opened
socket <a href="ivy.ivy.IvyClient-class.html#socket" class="link">self.socket</a>.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient._send">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr bgcolor="#e8f0f8" >
  <th colspan="2" class="group-header"
    >&nbsp;&nbsp;&nbsp;&nbsp;Protocol-related methods</th></tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#start_init" class="summary-sig-name">start_init</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">agent_name</span>)</span><br />
      Finalizes the initialization process by setting the client's
agent_name.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.start_init">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#end_init" class="summary-sig-name">end_init</a>(<span class="summary-sig-arg">self</span>)</span><br />
      Should be called when the initalization process ends.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.end_init">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#send_new_subscription" class="summary-sig-name">send_new_subscription</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">idx</span>,
        <span class="summary-sig-arg">regexp</span>)</span><br />
      Notifies the remote agent that we (the local agent) subscribe to
a new type of messages</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.send_new_subscription">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#remove_subscription" class="summary-sig-name">remove_subscription</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">idx</span>)</span><br />
      Notifies the remote agent that we (the local agent) are not
interested in a given subscription.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.remove_subscription">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="wave_bye"></a><span class="summary-sig-name">wave_bye</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">id</span>=<span class="summary-sig-default">0</span>)</span><br />
      Notifies the remote agent that we are about to quit</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.wave_bye">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr bgcolor="#e8f0f8" >
  <th colspan="2" class="group-header"
    >&nbsp;&nbsp;&nbsp;&nbsp;Manipulating the remote agent's subscriptions</th></tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#add_regexp" class="summary-sig-name">add_regexp</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">regexp_id</span>,
        <span class="summary-sig-arg">regexp</span>)</span></td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.add_regexp">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#remove_regexp" class="summary-sig-name">remove_regexp</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">regexp_id</span>)</span><br />
      Removes a regexp</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.remove_regexp">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr bgcolor="#e8f0f8" >
  <th colspan="2" class="group-header"
    >&nbsp;&nbsp;&nbsp;&nbsp;Sending messages</th></tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#send_msg" class="summary-sig-name">send_msg</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">msg</span>)</span><br />
      Sends a message to the client.</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.send_msg">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a href="ivy.ivy.IvyClient-class.html#send_direct_message" class="summary-sig-name">send_direct_message</a>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">num_id</span>,
        <span class="summary-sig-arg">msg</span>)</span><br />
      Sends a direct message</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.send_direct_message">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
      <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td><span class="summary-sig"><a name="send_die_message"></a><span class="summary-sig-name">send_die_message</span>(<span class="summary-sig-arg">self</span>,
        <span class="summary-sig-arg">num_id</span>=<span class="summary-sig-default">0</span>,
        <span class="summary-sig-arg">msg</span>=<span class="summary-sig-default"><code class="variable-quote">'</code><code class="variable-string"></code><code class="variable-quote">'</code></span>)</span><br />
      Sends a die message</td>
          <td align="right" valign="top">
            <span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.send_die_message">source&nbsp;code</a></span>
            
          </td>
        </tr>
      </table>
      
    </td>
  </tr>
</table>
<!-- ==================== CLASS VARIABLES ==================== -->
<a name="section-ClassVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Class Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-ClassVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="agent_id"></a><span class="summary-name">agent_id</span> = <code title="None">None</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="agent_name"></a><span class="summary-name">agent_name</span> = <code title="None">None</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="port"></a><span class="summary-name">port</span> = <code title="None">None</code>
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a name="socket"></a><span class="summary-name">socket</span> = <code title="None">None</code>
    </td>
  </tr>
</table>
<!-- ==================== INSTANCE VARIABLES ==================== -->
<a name="section-InstanceVariables"></a>
<table class="summary" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Variables</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceVariables"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type"><code class="link">threading.Lock</code></span>
    </td><td class="summary">
        <a href="ivy.ivy.IvyClient-class.html#regexp_lock" class="summary-name">regexp_lock</a><br />
      a non-reentrant lock protecting the variable
<a href="ivy.ivy.IvyClient-class.html#regexps" class="link">regexps</a>.
    </td>
  </tr>
<tr>
    <td width="15%" align="right" valign="top" class="summary">
      <span class="summary-type">&nbsp;</span>
    </td><td class="summary">
        <a href="ivy.ivy.IvyClient-class.html#regexps" class="summary-name">regexps</a><br />
      a dictionary mapping subscriptions' ids (as delivered by
<a href="ivy.ivy.IvyClient-class.html#add_regexp" class="link">add_regexp</a>) to the corresponding regular expressions.
    </td>
  </tr>
</table>
<!-- ==================== METHOD DETAILS ==================== -->
<a name="section-MethodDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Method Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-MethodDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="start_init"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">start_init</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">agent_name</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.start_init">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Finalizes the initialization process by setting the client's
agent_name.  This is a Ivy protocol requirement that an application
sends its agent-name only once during the initial handshake (beginning
with message of type <tt class="rst-docutils literal"><span class="pre">START_INIT</span></tt> and ending with a type
<tt class="rst-docutils literal"><span class="pre">END_INIT</span></tt>).  After this method is called, we expect to receive the
initial subscriptions for that client (or none); the initialization
process completes after <a href="ivy.ivy.IvyClient-class.html#end_init" class="link">end_init</a> is called.
  <dl class="fields">
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ivy.ivy.IvyIllegalStateError-class.html">IvyIllegalStateError</a></strong></code> - if the method has already been called
once</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="end_init"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">end_init</span>(<span class="sig-arg">self</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.end_init">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Should be called when the initalization process ends.
  <dl class="fields">
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ivy.ivy.IvyIllegalStateError-class.html">IvyIllegalStateError</a></strong></code> - if the method has already been called
(and <tt class="rst-docutils literal"><span class="pre">self.status</span></tt> has already been set to <tt class="rst-docutils literal"><span class="pre">INITIALIZED</span></tt>)</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="add_regexp"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">add_regexp</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">regexp_id</span>,
        <span class="sig-arg">regexp</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.add_regexp">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  
  <dl class="fields">
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ivy.ivy.IvyIllegalStateError-class.html">IvyIllegalStateError</a></strong></code> - if the client has not been fully
initialized yet (see <a href="ivy.ivy.IvyClient-class.html#start_init" class="link">start_init</a>)</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="remove_regexp"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">remove_regexp</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">regexp_id</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.remove_regexp">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Removes a regexp
  <dl class="fields">
    <dt>Returns:</dt>
        <dd>the regexp that has been removed</dd>
    <dt>Raises:</dt>
    <dd><ul class="nomargin-top">
        <li><code><strong class='fraise'><a href="ivy.ivy.IvyIllegalStateError-class.html">IvyIllegalStateError</a></strong></code> - if the client has not been fully
initialized yet (see <a href="ivy.ivy.IvyClient-class.html#start_init" class="link">start_init</a>)</li>
        <li><code><strong class='fraise'>KeyError</strong></code> - if no such subscription exists</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="send_msg"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">send_msg</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">msg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.send_msg">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Sends a message to the client.  The message is compared to the
client's subscriptions and it is sent if one of them matches.
  <dl class="fields">
    <dt>Returns:</dt>
        <dd><tt class="rst-docutils literal"><span class="pre">True</span></tt> if the message was actually sent to the client, that
is: if there is a regexp matching the message in the client's
subscriptions; returns <tt class="rst-docutils literal"><span class="pre">False</span></tt> otherwise.</dd>
  </dl>
</td></tr></table>
</div>
<a name="send_direct_message"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">send_direct_message</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">num_id</span>,
        <span class="sig-arg">msg</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.send_direct_message">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Sends a direct message</p>
<p>Note: the message will be encoded by <a href="ivy.ivy-module.html#encode_message" class="link">encode_message</a> with
<tt class="rst-docutils literal"><span class="pre">numerical_id=num_id</span></tt> and <tt class="rst-docutils literal"><span class="pre">params==msg</span></tt>; this means that if <code class="link">msg</code>
is not a string but a list or a tuple, the direct message will contain
more than one parameter.  This is an <strong>extension</strong> of the original Ivy
design, supported by python, but if you want to inter-operate with
applications using the standard Ivy API the message you send <em>must</em> be
a string. See in particular in <tt class="rst-docutils literal"><span class="pre">ivy.h</span></tt>:</p>
<pre class="rst-literal-block">
typedef void (*MsgDirectCallback)( IvyClientPtr app, void *user_data, int id, char *msg ) ;
</pre>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="send_new_subscription"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">send_new_subscription</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">idx</span>,
        <span class="sig-arg">regexp</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.send_new_subscription">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Notifies the remote agent that we (the local agent) subscribe to
a new type of messages
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>idx</code></strong> - the index/id of the new subscription. It is the
responsability of the local agent to make sure that every
subscription gets a unique id.</li>
        <li><strong class="pname"><code>regexp</code></strong> - a regular expression. The subscription consists in
receiving messages mathcing the regexp.</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="remove_subscription"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">remove_subscription</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">idx</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.remove_subscription">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  Notifies the remote agent that we (the local agent) are not
interested in a given subscription.
  <dl class="fields">
    <dt>Parameters:</dt>
    <dd><ul class="nomargin-top">
        <li><strong class="pname"><code>idx</code></strong> - the index/id of a subscription previously registered with
<a href="ivy.ivy.IvyClient-class.html#send_new_subscription" class="link">send_new_subscription</a>.</li>
    </ul></dd>
  </dl>
</td></tr></table>
</div>
<a name="__eq__"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">__eq__</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">client</span>)</span>
    <br /><em class="fname">(Equality operator)</em>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient.__eq__">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  cf. dict[client] or dict[(ip,port)] UNNEEDED FOR THE MOMENT
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<a name="_send"></a>
<div class="private">
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <table width="100%" cellpadding="0" cellspacing="0" border="0">
  <tr valign="top"><td>
  <h3 class="epydoc"><span class="sig"><span class="sig-name">_send</span>(<span class="sig-arg">self</span>,
        <span class="sig-arg">msg_type</span>,
        <span class="sig-arg">*params</span>)</span>
  </h3>
  </td><td align="right" valign="top"
    ><span class="codelink"><a href="ivy.ivy-pysrc.html#IvyClient._send">source&nbsp;code</a></span>&nbsp;
    </td>
  </tr></table>
  
  <p>Internally used to send message to the remote agent through the opened
socket <a href="ivy.ivy.IvyClient-class.html#socket" class="link">self.socket</a>.  This method catches all exceptions
<code class="link">socket.error</code> and <code class="link">socket.timeout</code> and ignores them, simply logging
them at the &quot;info&quot; level.</p>
<p>The errors that can occur are for example:</p>
<pre class="rst-literal-block">
socket.timeout: timed out
socket.error: (104, 'Connection reset by peer')
socket.error: (32, 'Broken pipe')
</pre>
<p>They can happen after a client disconnects abruptly (because it was
killed, because the network is down, etc.). We assume here that if and
when an error happens here, a disconnection will be detected shortly
afterwards by the server which then removes this agent from the bus.
Hence, we ognore the error; please also note that not ignoring the
error can have an impact on code, for example, IyServer.send_msg()
does not expect that IvyClient.send() fails and if it fails, it is
possible that the server does not send the message to all possible
subscribers.</p>
<div class="rst-note">
<p class="rst-first rst-admonition-title">Note</p>
<p class="rst-last"><tt class="rst-docutils literal"><span class="pre">ivysocket.c:SocketSendRaw()</span></tt> also ignores error, simply
logging them.</p>
</div>
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== INSTANCE VARIABLE DETAILS ==================== -->
<a name="section-InstanceVariableDetails"></a>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr bgcolor="#70b0f0" class="table-header">
  <td colspan="2" class="table-header">
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
      <tr valign="top">
        <td align="left"><span class="table-header">Instance Variable Details</span></td>
        <td align="right" valign="top"
         ><span class="options">[<a href="#section-InstanceVariableDetails"
         class="privatelink" onclick="toggle_private();"
         >hide private</a>]</span></td>
      </tr>
    </table>
  </td>
</tr>
</table>
<a name="regexp_lock"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">regexp_lock</h3>
  a non-reentrant lock protecting the variable
<a href="ivy.ivy.IvyClient-class.html#regexps" class="link">regexps</a>. Used by methods <a href="ivy.ivy.IvyClient-class.html#add_regexp" class="link">add_regexp</a>, <a href="ivy.ivy.IvyClient-class.html#remove_regexp" class="link">remove_regexp</a> and <a href="ivy.ivy.IvyClient-class.html#send_msg" class="link">send_msg</a>.
  <dl class="fields">
    <dt>Type:</dt>
      <dd><code class="link">threading.Lock</code></dd>
  </dl>
</td></tr></table>
</div>
<a name="regexps"></a>
<div>
<table class="details" border="1" cellpadding="3"
       cellspacing="0" width="100%" bgcolor="white">
<tr><td>
  <h3 class="epydoc">regexps</h3>
  a dictionary mapping subscriptions' ids (as delivered by
<a href="ivy.ivy.IvyClient-class.html#add_regexp" class="link">add_regexp</a>) to the corresponding regular expressions. Precisely, it
maps ids to tuples being <tt class="rst-docutils literal"><span class="pre">(regexp_as_string,</span> <span class="pre">compiled_regexp)</span></tt>.  You
shouldn't directly access or manipulate this variable, use <a href="ivy.ivy.IvyClient-class.html#add_regexp" class="link">add_regexp</a>
and <a href="ivy.ivy.IvyClient-class.html#remove_regexp" class="link">remove_regexp</a> instead; however if you really need/want to, you
must acquire the <a href="ivy.ivy.IvyClient-class.html#regexp_lock" class="link">regexp_lock</a> before accessing/modifying it.
  <dl class="fields">
  </dl>
</td></tr></table>
</div>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="ivy-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="http://www.tls.cena.fr/products/ivy/">ivy-python: a python library for the Ivy software bus</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Jun 10 18:21:20 2008
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
